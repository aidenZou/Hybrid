!function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var s;s=function(t,i,s){"use strict";var n=e(4),r=e(2),o=window.IS=e(6),a=function(t){return this.opts=$.extend({},t),this.rankListUrl="/appsite_api/rank/get_rank_by_cateid",this.categoryUrl="/appsite_api/rank/get_rank_list",window.ISIS=new o(this.opts.IS_Id,{scrollbars:!0,mouseWheel:!0,fadeScrollbar:!0,momentum:!0,useTransform:!0,preventDefault:!1}),this};a.prototype={constructor:a,init:function(){var t=this;return location.href.indexOf("page=sort_list")>-1?t.getRankList():location.href.indexOf("page=sort_switch")>-1&&t.getCategoryList(),t.bindEvent(),t},bindEvent:function(){$("div.rel_cont").live("click",function(){var t,i,e=$(this),s=e.attr("cateid"),n=e.attr("catename"),r={pcode:s,pname:n};i=JSON.stringify(r),t=encodeURIComponent(i),$.browser.ios?$(document.body).append('<iframe src="'+t+'/ios/topChang/click" style="display:none"></iframe>'):$.browser.android&&window.appInterface.changePhb&&window.appInterface.changePhb(i)}),ISIS.on("scrollEnd",function(){console.log("scrollEnd----"),ISIS.refresh()},!1),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)},getCategoryList:function(){var t=this;$.ajax({url:t.categoryUrl,type:"get",data:[],success:function(i){if(!i)return!1;var e=JSON.parse(i);console.log(e),0==e.result.code?($(".relative").empty(),$(".tip").html("对不起，搜索结果为空!"),$(".tishi").fadeIn()):($("div.tishi").fadeOut(),n.getTplToHtml({id:".relative",sTpl:"#topTpl",data:e},function(){$("#cg_"+t.opts.cateid).find("div.rel_more").attr("class","rel_ok fr box"),$(".relative").fadeIn(function(){ISIS.refresh()})}))},error:function(t){r.alert("请求链接失败，请检测网络!")}})},getRankList:function(){var t=this;$.ajax({url:t.rankListUrl+"?cateid="+t.opts.cateid,type:"get",data:[],success:function(t){if(!t)return!1;var i=JSON.parse(t);console.log(i),0==i.result.code?($(".relative").empty(),$(".tip").html("对不起，排行榜为空!"),$(".tishi").fadeIn()):($("div.tishi").fadeOut(),n.getTplToHtml({id:".relative",sTpl:"#topTpl",data:i},function(){$(".relative").fadeIn(function(){ISIS.refresh()})}))},error:function(t){r.alert("请求链接失败，请检测网络!")}})}},s.exports=function(t){return new a(t).init()}({cateid:r.queryUrl("cateid"),IS_Id:"#wrap"})}.call(i,e,i,t),!(void 0!==s&&(t.exports=s))},function(t,i,e){var s;s=function(t,i,e){"use strict";var s=function(t){$("#maskWin,.layerWap").remove();var i=$.extend({title:"",className:"",content:"",width:"",height:"auto",zIndex:10001,isBg:!0,isTitle:!0,isClose:!0,autoClose:!1,autoCloseTime:500,opacity:.3,confirmBtn:!1,repealBtn:!1,confirmTip:"确定",repealTip:"取消",onClose:function(){},confirmCallBack:function(){},repealCallBack:function(){}},t||{}),e=function(){var t=i,e="",a=$("<div class='"+t.className+"'>"),h=!1;a.css({width:t.width,height:t.height,zIndex:t.zIndex}),$("body").append(a),t.isTitle&&(e+="<h2>"+t.title+"</h2>"),e+="<div class='layerCon'>"+t.content+"</div>",e+="<div class='layerBtn' id='diaBtn'></div>",a.html(e),t.confirmBtn&&$("#diaBtn").append("<input type='button' class='h' id='conBtn' value='"+t.confirmTip+"'>"),t.repealBtn&&$("#diaBtn").append("<input type='button' id='repBtn' value='"+t.repealTip+"'>"),t.isBg&&r(),$("#conBtn").click(function(i){return t.confirmCallBack&&(h=t.confirmCallBack())?!1:void o()}),$("#repBtn").click(function(i){return t.repealCallBack&&(h=t.repealCallBack())?!1:(o(),void i.stopPropagation())}),$(".close").click(function(t){o(),t.stopPropagation()}),n(a),$(window).resize(function(t){n(a),window.removeEventListener("touchmove",s,!1)}),window.addEventListener("touchmove",s,!1),t.autoClose&&setTimeout(function(){o()},t.autoCloseTime)},s=function(t){var t=event||t;return t&&t.preventDefault||(window.event.returnValue=!1),!1},n=function(t){var i=t.width()/2,e=(t.height()/2,$(window).scrollTop());t.css({position:"absolute",top:($(window).height()-t.height())/2+e+"px",left:"50%","margin-left":"-"+i+"px","z-index":"9999"}).fadeIn()},r=function(){var t={position:"fixed",zIndex:"9000",top:"0px",left:"0px",height:"100%",width:"100%",backgroundColor:"#000",filter:"alpha(opacity=40)",opacity:.4},i=$('<div id="maskWin" class="daskbg" />');$("body").append(i.css(t)),$("#Overlay").animate({backgroundColor:t.backgroundColor,opacity:t.opacity},0)},o=function(){var t=$(".layerWap"),i=!1;return $("#maskWin").remove(),t.remove(),i=!0,window.removeEventListener("touchmove",s,!1),i};return e(),{closeDialog:o,options:i}};e.exports=s}.call(i,e,i,t),!(void 0!==s&&(t.exports=s))},function(t,i,e){var s;s=function(t,i,s){"use strict";var n=e(1),r={queryUrl:function(t){var i={},e=location.href.replace(/^[^?=]*\?/gi,"").split("#")[0];return e.replace(/(^|&)([^&=]+)=([^&]*)/g,function(t,e,s,n){try{s=decodeURIComponent(s)}catch(r){}try{n=decodeURIComponent(n)}catch(r){}s in i?i[s]instanceof Array?i[s].push(n):i[s]=[i[s],n]:i[s]=/\[\]$/.test(s)?[n]:n}),t?i[t]:i},fadeAlert:function(t){var i='<div class="alert psa clearfix" style="display:none;"><span class="alertOk dsb"></span><span class="scTxt dsb alertMsg">'+t+"</span></div>";$(document.body).append(i),$(".alert").fadeIn(3e3,function(){var t=this;setTimeout(function(){$(t).remove()},1e3)})},confirm:function(t,i,e){n({className:"layerWap layerB",content:"<p class='alignCenter'>"+t+"</p>",confirmBtn:!0,repealBtn:!0,repealTip:"确定",confirmTip:"取消",confirmCallBack:e||function(t){$(t).fadeOut()},repealCallBack:i})},alert:function(t,i){n({className:"layerWap layerA",content:"<p class='alignCenter'>"+t+"</p>",confirmBtn:!0,confirmTip:"确定",confirmCallBack:i})},imgAuto:function(t){var i=this;i.opts=$.extend({},t),i.imgList=$(i.opts.cls).find(i.opts.type),i._width=window.innerWidth;for(var e=0,s=i.imgList.length;s>e;e++){i.createImage(i.imgList[e],i._width);try{ISIS&&ISIS.refresh()}catch(n){}}},createImage:function(t,i){var e=$(t).attr("data-w");(t.width>30&&t.height>30||e>100)&&(console.log("w:"+t.width+"----h:"+t.height+"----s:"+i),(t.width>i/2||e)&&(t.onload=function(t){var i=$(t),e=i.attr("data-src")||i.attr("src");i.attr({style:"margin:0 auto;display:block;width:100%",src:e})}(t,i)))},videoAuto:function(t){var i=this,e=$(t.cls);if(!e.length)return!1;for(var s=0,n=e.length;n>s;s++){var r=$(e[s]),o=r.attr("src")||r.attr("original"),a=r.offset().left,h=o.split("&");r.hide(),i.width=window.innerWidth-2*a,i.heigth=i.width/1.3,o=h[0]+"&width="+i.width+"&height="+i.heigth+"&auto=0",r.attr({src:"",width:i.width,heigth:i.heigth}).hide();var l='<video  controls="controls"  name="media"><source src="'+h[0]+'" type="video/mp4"></video>';r.after(l);try{ISIS&&ISIS.refresh()}catch(c){}}},eventIOS_Android:function(t,i){$.browser.ios?t.call(this):$.browser.android&&i.call(this)}};s.exports=r}.call(i,e,i,t),!(void 0!==s&&(t.exports=s))},function(t,i,e){var s,n,r,r;(function(t){r=function(e,o,a){!function(e,o){n=[],s=o,r="function"==typeof s?s.apply(i,n):s,!(void 0!==r&&(t.exports=r))}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var i;return t.prototype.toString=function(){return""+this.string},i=t}(),i=function(t){"use strict";function i(t){return h[t]}function e(t){for(var i=1;arguments.length>i;i++)for(var e in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],e)&&(t[e]=arguments[i][e]);return t}function s(t){return t instanceof a?""+t:null==t?"":t?(t=""+t,c.test(t)?t.replace(l,i):t):t+""}function n(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}function r(t,i){return(t?t+".":"")+i}var o={},a=t,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=e;var p=Object.prototype.toString;o.toString=p;var u=function(t){return"function"==typeof t};u(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)});var u;o.isFunction=u;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===p.call(t):!1};return o.isArray=d,o.escapeExpression=s,o.isEmpty=n,o.appendContextPath=r,o}(t),e=function(){"use strict";function t(t,i){var s;i&&i.firstLine&&(s=i.firstLine,t+=" - "+s+":"+i.firstColumn);for(var n=Error.prototype.constructor.call(this,t),r=0;e.length>r;r++)this[e[r]]=n[e[r]];s&&(this.lineNumber=s,this.column=i.firstColumn)}var i,e=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),i=t}(),s=function(t,i){"use strict";function e(t,i){this.helpers=t||{},this.partials=i||{},s(this)}function s(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(i,e){var s=e.inverse,n=e.fn;if(i===!0)return n(this);if(i===!1||null==i)return s(this);if(c(i))return i.length>0?(e.ids&&(e.ids=[e.name]),t.helpers.each(i,e)):s(this);if(e.data&&e.ids){var o=g(e.data);o.contextPath=r.appendContextPath(e.data.contextPath,e.name),e={data:o}}return n(i,e)}),t.registerHelper("each",function(t,i){if(!i)throw new o("Must pass iterator to #each");var e,s,n=i.fn,a=i.inverse,h=0,l="";if(i.data&&i.ids&&(s=r.appendContextPath(i.data.contextPath,i.ids[0])+"."),p(t)&&(t=t.call(this)),i.data&&(e=g(i.data)),t&&"object"==typeof t)if(c(t))for(var u=t.length;u>h;h++)e&&(e.index=h,e.first=0===h,e.last=h===t.length-1,s&&(e.contextPath=s+h)),l+=n(t[h],{data:e});else for(var d in t)t.hasOwnProperty(d)&&(e&&(e.key=d,e.index=h,e.first=0===h,s&&(e.contextPath=s+d)),l+=n(t[d],{data:e}),h++);return 0===h&&(l=a(this)),l}),t.registerHelper("if",function(t,i){return p(t)&&(t=t.call(this)),!i.hash.includeZero&&!t||r.isEmpty(t)?i.inverse(this):i.fn(this)}),t.registerHelper("unless",function(i,e){return t.helpers["if"].call(this,i,{fn:e.inverse,inverse:e.fn,hash:e.hash})}),t.registerHelper("with",function(t,i){p(t)&&(t=t.call(this));var e=i.fn;if(r.isEmpty(t))return i.inverse(this);if(i.data&&i.ids){var s=g(i.data);s.contextPath=r.appendContextPath(i.data.contextPath,i.ids[0]),i={data:s}}return e(t,i)}),t.registerHelper("log",function(i,e){var s=e.data&&null!=e.data.level?parseInt(e.data.level,10):1;t.log(s,i)}),t.registerHelper("lookup",function(t,i){return t&&t[i]})}var n={},r=t,o=i,a="2.0.0";n.VERSION=a;var h=6;n.COMPILER_REVISION=h;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=l;var c=r.isArray,p=r.isFunction,u=r.toString,d="[object Object]";n.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:f,log:m,registerHelper:function(t,i){if(u.call(t)===d){if(i)throw new o("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=i},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,i){u.call(t)===d?r.extend(this.partials,t):this.partials[t]=i},unregisterPartial:function(t){delete this.partials[t]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,i){if(t>=f.level){var e=f.methodMap[t];"undefined"!=typeof console&&console[e]&&console[e].call(console,i)}}};n.logger=f;var m=f.log;n.log=m;var g=function(t){var i=r.extend({},t);return i._parent=t,i};return n.createFrame=g,n}(i,e),n=function(t,i,e){"use strict";function s(t){var i=t&&t[0]||1,e=u;if(i!==e){if(e>i){var s=d[e],n=d[i];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+n+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function n(t,i){if(!i)throw new p("No environment passed to template");if(!t||!t.main)throw new p("Unknown template object: "+typeof t);i.VM.checkRevision(t.compiler);var e=function(e,s,n,r,o,a,h,l,u){o&&(r=c.extend({},r,o));var d=i.VM.invokePartial.call(this,e,n,r,a,h,l,u);if(null==d&&i.compile){var f={helpers:a,partials:h,data:l,depths:u};h[n]=i.compile(e,{data:void 0!==l,compat:t.compat},i),d=h[n](r,f)}if(null!=d){if(s){for(var m=d.split("\n"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=s+m[g];d=m.join("\n")}return d}throw new p("The partial "+n+" could not be compiled when running in runtime-only mode")},s={lookup:function(t,i){for(var e=t.length,s=0;e>s;s++)if(t[s]&&null!=t[s][i])return t[s][i]},lambda:function(t,i){return"function"==typeof t?t.call(i):t},escapeExpression:c.escapeExpression,invokePartial:e,fn:function(i){return t[i]},programs:[],program:function(t,i,e){var s=this.programs[t],n=this.fn(t);return i||e?s=r(this,t,n,i,e):s||(s=this.programs[t]=r(this,t,n)),s},data:function(t,i){for(;t&&i--;)t=t._parent;return t},merge:function(t,i){var e=t||i;return t&&i&&t!==i&&(e=c.extend({},i,t)),e},noop:i.VM.noop,compilerInfo:t.compiler},n=function(i,e){e=e||{};var r=e.data;n._setup(e),!e.partial&&t.useData&&(r=h(i,r));var o;return t.useDepths&&(o=e.depths?[i].concat(e.depths):[i]),t.main.call(s,i,s.helpers,s.partials,r,o)};return n.isTop=!0,n._setup=function(e){e.partial?(s.helpers=e.helpers,s.partials=e.partials):(s.helpers=s.merge(e.helpers,i.helpers),t.usePartial&&(s.partials=s.merge(e.partials,i.partials)))},n._child=function(i,e,n){if(t.useDepths&&!n)throw new p("must pass parent depths");return r(s,i,t[i],e,n)},n}function r(t,i,e,s,n){var r=function(i,r){return r=r||{},e.call(t,i,t.helpers,t.partials,r.data||s,n&&[i].concat(n))};return r.program=i,r.depth=n?n.length:0,r}function o(t,i,e,s,n,r,o){var a={partial:!0,helpers:s,partials:n,data:r,depths:o};if(void 0===t)throw new p("The partial "+i+" could not be found");return t instanceof Function?t(e,a):void 0}function a(){return""}function h(t,i){return i&&"root"in i||(i=i?f(i):{},i.root=t),i}var l={},c=t,p=i,u=e.COMPILER_REVISION,d=e.REVISION_CHANGES,f=e.createFrame;return l.checkRevision=s,l.template=n,l.program=r,l.invokePartial=o,l.noop=a,l}(i,e,s),r=function(t,i,e,s,n){"use strict";var r,o=t,a=i,h=e,l=s,c=n,p=function(){var t=new o.HandlebarsEnvironment;return l.extend(t,o),t.SafeString=a,t.Exception=h,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(i){return c.template(i,t)},t},u=p();return u.create=p,u["default"]=u,r=u}(s,t,e,i,n),o=function(t){"use strict";function i(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var e,s=t,n={ProgramNode:function(t,e,s){i.call(this,s),this.type="program",this.statements=t,this.strip=e},MustacheNode:function(t,e,s,r,o){if(i.call(this,o),this.type="mustache",this.strip=r,null!=s&&s.charAt){var a=s.charAt(3)||s.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!s;this.sexpr=t instanceof n.SexprNode?t:new n.SexprNode(t,e),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,e,s){i.call(this,s),this.type="sexpr",this.hash=e;var n=this.id=t[0],r=this.params=t.slice(1);this.isHelper=!(!r.length&&!e),this.eligibleHelper=this.isHelper||n.isSimple},PartialNode:function(t,e,s,n,r){i.call(this,r),this.type="partial",this.partialName=t,this.context=e,this.hash=s,this.strip=n,this.strip.inlineStandalone=!0},BlockNode:function(t,e,s,n,r){i.call(this,r),this.type="block",this.mustache=t,this.program=e,this.inverse=s,this.strip=n,s&&!e&&(this.isInverse=!0)},RawBlockNode:function(t,e,r,o){if(i.call(this,o),t.sexpr.id.original!==r)throw new s(t.sexpr.id.original+" doesn't match "+r,this);e=new n.ContentNode(e,o),this.type="block",this.mustache=t,this.program=new n.ProgramNode([e],{},o)},ContentNode:function(t,e){i.call(this,e),this.type="content",this.original=this.string=t},HashNode:function(t,e){i.call(this,e),this.type="hash",this.pairs=t},IdNode:function(t,e){i.call(this,e),this.type="ID";for(var n="",r=[],o=0,a="",h=0,l=t.length;l>h;h++){var c=t[h].part;if(n+=(t[h].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new s("Invalid path: "+n,this);".."===c?(o++,a+="../"):this.isScoped=!0}else r.push(c)}this.original=n,this.parts=r,this.string=r.join("."),this.depth=o,this.idName=a+this.string,this.isSimple=1===t.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(t,e){i.call(this,e),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,e){i.call(this,e),this.type="DATA",this.id=t,this.stringModeValue=t.stringModeValue,this.idName="@"+t.stringModeValue},StringNode:function(t,e){i.call(this,e),this.type="STRING",this.original=this.string=this.stringModeValue=t},NumberNode:function(t,e){i.call(this,e),this.type="NUMBER",this.original=this.number=t,this.stringModeValue=Number(t)},BooleanNode:function(t,e){i.call(this,e),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,e){i.call(this,e),this.type="comment",this.comment=t,this.strip={inlineStandalone:!0}}};return e=n}(e),h=function(){"use strict";var t,i=function(){function t(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,i,e,s,n,r){var o=r.length-1;switch(n){case 1:return s.prepareProgram(r[o-1].statements,!0),r[o-1];case 2:this.$=new s.ProgramNode(s.prepareProgram(r[o]),{},this._$);break;case 3:this.$=r[o];break;case 4:this.$=r[o];break;case 5:this.$=r[o];break;case 6:this.$=r[o];break;case 7:this.$=new s.ContentNode(r[o],this._$);break;case 8:this.$=new s.CommentNode(r[o],this._$);break;case 9:this.$=new s.RawBlockNode(r[o-2],r[o-1],r[o],this._$);break;case 10:this.$=new s.MustacheNode(r[o-1],null,"","",this._$);break;case 11:this.$=s.prepareBlock(r[o-3],r[o-2],r[o-1],r[o],!1,this._$);break;case 12:this.$=s.prepareBlock(r[o-3],r[o-2],r[o-1],r[o],!0,this._$);break;case 13:this.$=new s.MustacheNode(r[o-1],null,r[o-2],s.stripFlags(r[o-2],r[o]),this._$);break;case 14:this.$=new s.MustacheNode(r[o-1],null,r[o-2],s.stripFlags(r[o-2],r[o]),this._$);break;case 15:this.$={strip:s.stripFlags(r[o-1],r[o-1]),program:r[o]};break;case 16:this.$={path:r[o-1],strip:s.stripFlags(r[o-2],r[o])};break;case 17:this.$=new s.MustacheNode(r[o-1],null,r[o-2],s.stripFlags(r[o-2],r[o]),this._$);break;case 18:this.$=new s.MustacheNode(r[o-1],null,r[o-2],s.stripFlags(r[o-2],r[o]),this._$);break;case 19:this.$=new s.PartialNode(r[o-3],r[o-2],r[o-1],s.stripFlags(r[o-4],r[o]),this._$);break;case 20:this.$=new s.PartialNode(r[o-2],void 0,r[o-1],s.stripFlags(r[o-3],r[o]),this._$);break;case 21:this.$=new s.SexprNode([r[o-2]].concat(r[o-1]),r[o],this._$);break;case 22:this.$=new s.SexprNode([r[o]],null,this._$);break;case 23:this.$=r[o];break;case 24:this.$=new s.StringNode(r[o],this._$);break;case 25:this.$=new s.NumberNode(r[o],this._$);break;case 26:this.$=new s.BooleanNode(r[o],this._$);break;case 27:this.$=r[o];break;case 28:r[o-1].isHelper=!0,this.$=r[o-1];break;case 29:this.$=new s.HashNode(r[o],this._$);break;case 30:this.$=[r[o-2],r[o]];break;case 31:this.$=new s.PartialNameNode(r[o],this._$);break;case 32:this.$=new s.PartialNameNode(new s.StringNode(r[o],this._$),this._$);break;case 33:this.$=new s.PartialNameNode(new s.NumberNode(r[o],this._$));break;case 34:this.$=new s.DataNode(r[o],this._$);break;case 35:this.$=new s.IdNode(r[o],this._$);break;case 36:r[o-2].push({part:r[o],separator:r[o-1]}),this.$=r[o-2];break;case 37:this.$=[{part:r[o]}];break;case 38:this.$=[];break;case 39:r[o-1].push(r[o]);break;case 48:this.$=[];break;case 49:r[o-1].push(r[o]);break;case 52:this.$=[r[o]];break;case 53:r[o-1].push(r[o])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t){throw Error(t)},parse:function(t){function i(){var t;return t=e.lexer.lex()||1,"number"!=typeof t&&(t=e.symbols_[t]||t),t}var e=this,s=[0],n=[null],r=[],o=this.table,a="",h=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;r.push(p);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,y,S,x,k,b={};;){if(m=s[s.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||void 0===d)&&(d=i()),g=o[m]&&o[m][d]),void 0===g||!g.length||!g[0]){var w="";if(!c){k=[];for(y in o[m])this.terminals_[y]&&y>2&&k.push("'"+this.terminals_[y]+"'");w=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:p,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:s.push(d),n.push(this.lexer.yytext),r.push(this.lexer.yylloc),s.push(g[1]),d=null,f?(d=f,f=null):(l=this.lexer.yyleng,a=this.lexer.yytext,h=this.lexer.yylineno,p=this.lexer.yylloc,c>0&&c--);break;case 2:if(S=this.productions_[g[1]][1],b.$=n[n.length-S],b._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},u&&(b._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(b,a,l,h,this.yy,g[1],n,r),void 0!==v)return v;S&&(s=s.slice(0,-2*S),n=n.slice(0,-1*S),r=r.slice(0,-1*S)),s.push(this.productions_[g[1]][0]),n.push(b.$),r.push(b._$),x=o[s[s.length-2]][s[s.length-1]],s.push(x);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,i){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,i)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var i=t.match(/(?:\r\n?|\n).*/g);return i?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var i=t.length,e=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-i-1),this.offset-=i;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),e.length-1&&(this.yylineno-=e.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===s.length?this.yylloc.first_column:0)+s[s.length-e.length].length-e[0].length:this.yylloc.first_column-i},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-i]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),i=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+i+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,i,e,s,n;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;r.length>o&&(e=this._input.match(this.rules[r[o]]),!e||i&&!(e[0].length>i[0].length)||(i=e,s=o,this.options.flex));o++);return i?(n=i[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+i[0].length},this.yytext+=i[0],this.match+=i[0],this.matches=i,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(i[0].length),this.matched+=i[0],t=this.performAction.call(this,this.yy,this,r[s],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2];
},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,i,e,s){function n(t,e){return i.yytext=i.yytext.substr(t,i.yyleng-e)}switch(e){case 0:if("\\\\"===i.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===i.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),i.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return i.yytext=i.yytext.substr(5,i.yyleng-9),this.popState(),15;case 4:return 12;case 5:return n(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return n(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return i.yytext=n(1,2).replace(/\\"/g,'"'),42;case 30:return i.yytext=n(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return i.yytext=n(1,2),50;case 37:return"INVALID";case 38:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},t}();return i.lexer=e,t.prototype=i,i.Parser=t,new t}();return t=i}(),l=function(t){"use strict";function i(t,i){return{left:"~"===t.charAt(2),right:"~"===i.charAt(i.length-3)}}function e(t,i,e,s,h,c){if(t.sexpr.id.original!==s.path.original)throw new l(t.sexpr.id.original+" doesn't match "+s.path.original,t);var p=e&&e.program,u={left:t.strip.left,right:s.strip.right,openStandalone:r(i.statements),closeStandalone:n((p||i).statements)};if(t.strip.right&&o(i.statements,null,!0),p){var d=e.strip;d.left&&a(i.statements,null,!0),d.right&&o(p.statements,null,!0),s.strip.left&&a(p.statements,null,!0),n(i.statements)&&r(p.statements)&&(a(i.statements),o(p.statements))}else s.strip.left&&a(i.statements,null,!0);return h?new this.BlockNode(t,p,i,u,c):new this.BlockNode(t,i,p,u,c)}function s(t,i){for(var e=0,s=t.length;s>e;e++){var h=t[e],l=h.strip;if(l){var c=n(t,e,i,"partial"===h.type),p=r(t,e,i),u=l.openStandalone&&c,d=l.closeStandalone&&p,f=l.inlineStandalone&&c&&p;l.right&&o(t,e,!0),l.left&&a(t,e,!0),f&&(o(t,e),a(t,e)&&"partial"===h.type&&(h.indent=/([ \t]+$)/.exec(t[e-1].original)?RegExp.$1:"")),u&&(o((h.program||h.inverse).statements),a(t,e)),d&&(o(t,e),a((h.inverse||h.program).statements))}}return t}function n(t,i,e){void 0===i&&(i=t.length);var s=t[i-1],n=t[i-2];return s?"content"===s.type?(n||!e?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(s.original):void 0:e}function r(t,i,e){void 0===i&&(i=-1);var s=t[i+1],n=t[i+2];return s?"content"===s.type?(n||!e?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(s.original):void 0:e}function o(t,i,e){var s=t[null==i?0:i+1];if(s&&"content"===s.type&&(e||!s.rightStripped)){var n=s.string;s.string=s.string.replace(e?/^\s+/:/^[ \t]*\r?\n?/,""),s.rightStripped=s.string!==n}}function a(t,i,e){var s=t[null==i?t.length-1:i-1];if(s&&"content"===s.type&&(e||!s.leftStripped)){var n=s.string;return s.string=s.string.replace(e?/\s+$/:/[ \t]+$/,""),s.leftStripped=s.string!==n,s.leftStripped}}var h={},l=t;return h.stripFlags=i,h.prepareBlock=e,h.prepareProgram=s,h}(e),c=function(t,i,e,s){"use strict";function n(t){return t.constructor===a.ProgramNode?t:(o.yy=c,o.parse(t))}var r={},o=t,a=i,h=e,l=s.extend;r.parser=o;var c={};return l(c,h,a),r.parse=n,r}(h,o,l,i),p=function(t,i){"use strict";function e(){}function s(t,i,e){if(null==t||"string"!=typeof t&&t.constructor!==e.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);i=i||{},"data"in i||(i.data=!0),i.compat&&(i.useDepths=!0);var s=e.parse(t),n=(new e.Compiler).compile(s,i);return(new e.JavaScriptCompiler).compile(n,i)}function n(t,i,e){function s(){var s=e.parse(t),n=(new e.Compiler).compile(s,i),r=(new e.JavaScriptCompiler).compile(n,i,void 0,!0);return e.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==e.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);i=i||{},"data"in i||(i.data=!0),i.compat&&(i.useDepths=!0);var n,r=function(t,i){return n||(n=s()),n.call(this,t,i)};return r._setup=function(t){return n||(n=s()),n._setup(t)},r._child=function(t,i,e){return n||(n=s()),n._child(t,i,e)},r}function r(t,i){if(t===i)return!0;if(h(t)&&h(i)&&t.length===i.length){for(var e=0;t.length>e;e++)if(!r(t[e],i[e]))return!1;return!0}}var o={},a=t,h=i.isArray,l=[].slice;return o.Compiler=e,e.prototype={compiler:e,equals:function(t){var i=this.opcodes.length;if(t.opcodes.length!==i)return!1;for(var e=0;i>e;e++){var s=this.opcodes[e],n=t.opcodes[e];if(s.opcode!==n.opcode||!r(s.args,n.args))return!1}for(i=this.children.length,e=0;i>e;e++)if(!this.children[e].equals(t.children[e]))return!1;return!0},guid:0,compile:function(t,i){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=i,this.stringParams=i.stringParams,this.trackIds=i.trackIds;var e=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},e)for(var s in e)this.options.knownHelpers[s]=e[s];return this.accept(t)},accept:function(t){return this[t.type](t)},program:function(t){for(var i=t.statements,e=0,s=i.length;s>e;e++)this.accept(i[e]);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(t,i){return t-i}),this},compileProgram:function(t){var i,e=(new this.compiler).compile(t,this.options),s=this.guid++;this.usePartial=this.usePartial||e.usePartial,this.children[s]=e;for(var n=0,r=e.depths.list.length;r>n;n++)i=e.depths.list[n],2>i||this.addDepth(i-1);return s},block:function(t){var i=t.mustache,e=t.program,s=t.inverse;e&&(e=this.compileProgram(e)),s&&(s=this.compileProgram(s));var n=i.sexpr,r=this.classifySexpr(n);"helper"===r?this.helperSexpr(n,e,s):"simple"===r?(this.simpleSexpr(n),this.opcode("pushProgram",e),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("blockValue",n.id.original)):(this.ambiguousSexpr(n,e,s),this.opcode("pushProgram",e),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var i,e,s=t.pairs;for(this.opcode("pushHash"),i=0,e=s.length;e>i;i++)this.pushParam(s[i][1]);for(;i--;)this.opcode("assignToHash",s[i][0]);this.opcode("popHash")},partial:function(t){var i=t.partialName;this.usePartial=!0,t.hash?this.accept(t.hash):this.opcode("push","undefined"),t.context?this.accept(t.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",i.name,t.indent||""),this.opcode("append")},content:function(t){t.string&&this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,i,e){var s=t.id,n=s.parts[0],r=null!=i||null!=e;this.opcode("getContext",s.depth),this.opcode("pushProgram",i),this.opcode("pushProgram",e),this.ID(s),this.opcode("invokeAmbiguous",n,r)},simpleSexpr:function(t){var i=t.id;"DATA"===i.type?this.DATA(i):i.parts.length?this.ID(i):(this.addDepth(i.depth),this.opcode("getContext",i.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,i,e){var s=this.setupFullMustacheParams(t,i,e),n=t.id,r=n.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",s.length,r);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+r,t);n.falsy=!0,this.ID(n),this.opcode("invokeHelper",s.length,n.original,n.isSimple)}},sexpr:function(t){var i=this.classifySexpr(t);"simple"===i?this.simpleSexpr(t):"helper"===i?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var i=t.parts[0];i?this.opcode("lookupOnContext",t.parts,t.falsy,t.isScoped):this.opcode("pushContext")},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id.depth,t.id.parts)},STRING:function(t){this.opcode("pushString",t.string)},NUMBER:function(t){this.opcode("pushLiteral",t.number)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:l.call(arguments,1)})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var i=t.isHelper,e=t.eligibleHelper,s=this.options;if(e&&!i){var n=t.id.parts[0];s.knownHelpers[n]?i=!0:s.knownHelpersOnly&&(e=!1)}return i?"helper":e?"ambiguous":"simple"},pushParams:function(t){for(var i=0,e=t.length;e>i;i++)this.pushParam(t[i])},pushParam:function(t){this.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):(this.trackIds&&this.opcode("pushId",t.type,t.idName||t.stringModeValue),this.accept(t))},setupFullMustacheParams:function(t,i,e){var s=t.params;return this.pushParams(s),this.opcode("pushProgram",i),this.opcode("pushProgram",e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),s}},o.precompile=s,o.compile=n,o}(e,i),u=function(t,i){"use strict";function e(t){this.value=t}function s(){}var n,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,a=i;s.prototype={nameLookup:function(t,i){return s.isValidJavaScriptVariableName(i)?t+"."+i:t+"['"+i+"']"},depthedLookup:function(t){return this.aliases.lookup="this.lookup",'lookup(depths, "'+t+'")'},compilerInfo:function(){var t=r,i=o[t];return[t,i]},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,i,e,s){this.environment=t,this.options=i,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!s,this.name=this.environment.name,this.isChild=!!e,this.context=e||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,i),this.useDepths=this.useDepths||t.depths.list.length||this.options.compat;var n,r,o,h=t.opcodes;for(r=0,o=h.length;o>r;r++)n=h[r],this[n.opcode].apply(this,n.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var l=this.createFunctionContext(s);if(this.isChild)return l;var c={compiler:this.compilerInfo(),main:l},p=this.context.programs;for(r=0,o=p.length;o>r;r++)p[r]&&(c[r]=p[r]);return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.options.compat&&(c.compat=!0),s||(c.compiler=JSON.stringify(c.compiler),c=this.objectLiteral(c)),c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(t){var i="",e=this.stackVars.concat(this.registers.list);e.length>0&&(i+=", "+e.join(", "));for(var s in this.aliases)this.aliases.hasOwnProperty(s)&&(i+=", "+s+"="+this.aliases[s]);var n=["depth0","helpers","partials","data"];this.useDepths&&n.push("depths");var r=this.mergeSource(i);return t?(n.push(r),Function.apply(this,n)):"function("+n.join(",")+") {\n  "+r+"}"},mergeSource:function(t){for(var i,e,s="",n=!this.forceBuffer,r=0,o=this.source.length;o>r;r++){var a=this.source[r];a.appendToBuffer?i=i?i+"\n    + "+a.content:a.content:(i&&(s?s+="buffer += "+i+";\n  ":(e=!0,s=i+";\n  "),i=void 0),s+=a+"\n  ",this.environment.isSimple||(n=!1))}return n?(i||!s)&&(s+="return "+(i||'""')+";\n"):(t+=", buffer = "+(e?"":this.initializeBuffer()),s+=i?"return buffer + "+i+";\n":"return buffer;\n"),t&&(s="var "+t.substring(2)+(e?"":";\n  ")+s),s},blockValue:function(t){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var i=[this.contextName(0)];this.setupParams(t,0,i);var e=this.popStack();i.splice(1,0,e),this.push("blockHelperMissing.call("+i.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource("if (!"+this.lastHelper+") { "+i+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.pendingContent=t},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if ("+t+" != null) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,i,e){var s=0,n=t.length;for(e||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[s++]));n>s;s++)this.replaceStack(function(e){var n=this.nameLookup(e,t[s],"context");return i?" && "+n:" != null ? "+n+" : "+e})},lookupData:function(t,i){t?this.pushStackLiteral("this.data(data, "+t+")"):this.pushStackLiteral("data");for(var e=i.length,s=0;e>s;s++)this.replaceStack(function(t){return" && "+this.nameLookup(t,i[s],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(t,i){this.pushContext(),this.pushString(i),"sexpr"!==i&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+t.ids.join(",")+"}"),this.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,i,e){this.aliases.helperMissing="helpers.helperMissing";var s=this.popStack(),n=this.setupHelper(t,i),r=(e?n.name+" || ":"")+s+" || helperMissing";this.push("(("+r+").call("+n.callParams+"))")},invokeKnownHelper:function(t,i){var e=this.setupHelper(t,i);this.push(e.name+".call("+e.callParams+")")},invokeAmbiguous:function(t,i){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var e=this.popStack();this.emptyHash();var s=this.setupHelper(0,t,i),n=this.lastHelper=this.nameLookup("helpers",t,"helper");this.push("((helper = (helper = "+n+" || "+e+") != null ? helper : helperMissing"+(s.paramsInit?"),("+s.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+s.callParams+") : helper))")},invokePartial:function(t,i){var e=[this.nameLookup("partials",t,"partial"),"'"+i+"'","'"+t+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?e.push("data"):this.options.compat&&e.push("undefined"),this.options.compat&&e.push("depths"),this.push("this.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var i,e,s,n=this.popStack();this.trackIds&&(s=this.popStack()),this.stringParams&&(e=this.popStack(),i=this.popStack());var r=this.hash;i&&r.contexts.push("'"+t+"': "+i),e&&r.types.push("'"+t+"': "+e),s&&r.ids.push("'"+t+"': "+s),r.values.push("'"+t+"': ("+n+")")},pushId:function(t,i){"ID"===t||"DATA"===t?this.pushString(i):"sexpr"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:s,compileChildren:function(t,i){for(var e,s,n=t.children,r=0,o=n.length;o>r;r++){e=n[r],s=new this.compiler;var a=this.matchExistingProgram(e);null==a?(this.context.programs.push(""),a=this.context.programs.length,e.index=a,e.name="program"+a,this.context.programs[a]=s.compile(e,i,this.context,!this.precompile),this.context.environments[a]=e,this.useDepths=this.useDepths||s.useDepths):(e.index=a,e.name="program"+a)}},matchExistingProgram:function(t){for(var i=0,e=this.context.environments.length;e>i;i++){var s=this.context.environments[i];if(s&&s.equals(t))return i}},programExpression:function(t){var i=this.environment.children[t],e=(i.depths.list,this.useDepths),s=[i.index,"data"];return e&&s.push("depths"),"this.program("+s.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new e(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var i=this.incrStack();return this.pushSource(i+" = "+t+";"),this.compileStack.push(i),i},replaceStack:function(t){var i,s,n,r="";if(this.isInline(),!this.isInline())throw new a("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof e)r=i=o.value,n=!0;else{s=!this.stackSlot;var h=s?this.incrStack():this.topStackName();r="("+this.push(h)+" = "+o+")",i=this.topStack()}var l=t.call(this,i);n||this.popStack(),s&&this.stackSlot--,this.push("("+r+l+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var i=0,s=t.length;s>i;i++){var n=t[i];n instanceof e?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var i=this.isInline(),s=(i?this.inlineStack:this.compileStack).pop();if(!t&&s instanceof e)return s.value;if(!i){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return s},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return i instanceof e?i.value:i},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(this.quotedString(e)+":"+t[e]);return"{"+i.join(",")+"}"},setupHelper:function(t,i,e){var s=[],n=this.setupParams(i,t,s,e),r=this.nameLookup("helpers",i,"helper");return{params:s,paramsInit:n,name:r,callParams:[this.contextName(0)].concat(s).join(", ")}},setupOptions:function(t,i,e){var s,n,r,o={},a=[],h=[],l=[];o.name=this.quotedString(t),o.hash=this.popStack(),this.trackIds&&(o.hashIds=this.popStack()),this.stringParams&&(o.hashTypes=this.popStack(),o.hashContexts=this.popStack()),n=this.popStack(),r=this.popStack(),(r||n)&&(r||(r="this.noop"),n||(n="this.noop"),o.fn=r,o.inverse=n);for(var c=i;c--;)s=this.popStack(),e[c]=s,this.trackIds&&(l[c]=this.popStack()),this.stringParams&&(h[c]=this.popStack(),a[c]=this.popStack());return this.trackIds&&(o.ids="["+l.join(",")+"]"),this.stringParams&&(o.types="["+h.join(",")+"]",o.contexts="["+a.join(",")+"]"),this.options.data&&(o.data="data"),o},setupParams:function(t,i,e,s){var n=this.objectLiteral(this.setupOptions(t,i,e));return s?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=s.RESERVED_WORDS={},c=0,p=h.length;p>c;c++)l[h[c]]=!0;return s.isValidJavaScriptVariableName=function(t){return!s.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},n=s}(s,e),d=function(t,i,e,s,n){"use strict";var r,o=t,h=i,l=e.parser,c=e.parse,p=s.Compiler,u=s.compile,d=s.precompile,f=n,m=o.create,g=function(){var t=m();return t.compile=function(i,e){return u(i,e,t)},t.precompile=function(i,e){return d(i,e,t)},t.AST=h,t.Compiler=p,t.JavaScriptCompiler=f,t.Parser=l,t.parse=c,t};return o=g(),o.create=g,o["default"]=o,a.exports=r=o,r}(r,o,c,p,u);return d})}.call(i,e,i,t),!(void 0!==r&&(t.exports=r))}).call(i,e(5)(t))},function(t,i,e){var s;s=function(t,i,s){"use strict";var n=e(3);n.registerHelper("if_even",function(t,i){return t%2==1?i.fn(this):i.inverse(this)}),n.registerHelper("top3",function(t,i){return 3>t?i.fn(this):i.inverse(this)}),n.registerHelper("addOne",function(t){return t+1});var r={getTplToHtml:function(t,i){var e=$.extend({},t||{}),s=$(e.sTpl).html(),r=n.compile(s)(e.data);$.when().done(function(){2==e.aType?$(e.id).append($.trim(r)):e.aType?$(e.id).after($.trim(r)):$(e.id).html($.trim(r)),console.log("进程-->--开始加载数据......1.....By -clone")}).then(function(){$.when().done(function(){i&&i.call(this),console.log("进程-->--执行回调函数......2.....By -clone")}).then(function(){try{ISIS&&ISIS.refresh()}catch(t){}console.log("进程-->--刷新ISIS数据......3.....By -clone")})}).fail(function(){try{ISIS&&ISIS.refresh()}catch(t){}console.log("----数据异常执行失败!!!----By -clone")})}};s.exports=r}.call(i,e,i,t),!(void 0!==s&&(t.exports=s))},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,i,e){var s;s=function(t,i,e){!function(t,i,s){function n(t,e){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var s in e)this.options[s]=e[s];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function r(t,e,s){var n=i.createElement("div"),r=i.createElement("div");return s===!0&&(n.style.cssText="position:absolute;z-index:9999",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),r.className="iScrollIndicator","h"==t?(s===!0&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",r.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(s===!0&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",r.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",e||(n.style.pointerEvents="none"),n.appendChild(r),n}function o(e,s){this.wrapper="string"==typeof s.el?i.querySelector(s.el):s.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var n in s)this.options[n]=s[n];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(t,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(t,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[h.style.transform]=this.scroller.translateZ,this.wrapperStyle[h.style.transitionDuration]=h.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)},h=function(){function e(t){return a===!1?!1:""===a?t:a+t.charAt(0).toUpperCase()+t.substr(1)}var n,r={},o=i.createElement("div").style,a=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],e=0,s=i.length;s>e;e++)if(t=i[e]+"ransform",t in o)return i[e].substr(0,i[e].length-1);return!1}();return r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(t,i){for(var e in i)t[e]=i[e]},r.addEvent=function(t,i,e,s){t.addEventListener(i,e,!!s)},r.removeEvent=function(t,i,e,s){t.removeEventListener(i,e,!!s)},r.prefixPointerEvent=function(i){return t.MSPointerEvent?"MSPointer"+i.charAt(9).toUpperCase()+i.substr(10):i},r.momentum=function(t,i,e,n,r,o){var a,h,l=t-i,c=s.abs(l)/e;return o=void 0===o?6e-4:o,a=t+c*c/(2*o)*(0>l?-1:1),h=c/o,n>a?(a=r?n-r/2.5*(c/8):n,l=s.abs(a-t),h=l/c):a>0&&(a=r?r/2.5*(c/8):0,l=s.abs(t)+a,h=l/c),{destination:s.round(a),duration:h}},n=e("transform"),r.extend(r,{hasTransform:n!==!1,hasPerspective:e("perspective")in o,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:e("transition")in o}),r.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),r.extend(r.style={},{transform:n,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin")}),r.hasClass=function(t,i){var e=new RegExp("(^|\\s)"+i+"(\\s|$)");return e.test(t.className)},r.addClass=function(t,i){if(!r.hasClass(t,i)){var e=t.className.split(" ");e.push(i),t.className=e.join(" ")}},r.removeClass=function(t,i){if(r.hasClass(t,i)){var e=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(e," ")}},r.offset=function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,e-=t.offsetTop;return{left:i,top:e}},r.preventDefaultException=function(t,i){for(var e in i)if(i[e].test(t[e]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return s.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var i=.22,e=.4;return 0===t?0:1==t?1:e*s.pow(2,-10*t)*s.sin(2*(t-i/4)*s.PI/i)+1}}}),r.tap=function(t,e){var s=i.createEvent("Event");s.initEvent(e,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)},r.click=function(t){var e,s=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(e=i.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,s.dispatchEvent(e))},r}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=h.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&h.eventType[t.type]!==this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var i,e=t.touches?t.touches[0]:t;this.initiated=h.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,i=this.getComputedPosition(),this._translate(s.round(i.x),s.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var i,e,n,r,o=t.touches?t.touches[0]:t,a=o.pageX-this.pointX,l=o.pageY-this.pointY,c=h.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=a,this.distY+=l,
n=s.abs(this.distX),r=s.abs(this.distY),!(c-this.endTime>300&&10>n&&10>r)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=n>r+this.options.directionLockThreshold?"h":r>=n+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,i=this.x+a,e=this.y+l,(i>0||i<this.maxScrollX)&&(i=this.options.bounce?this.x+a/3:i>0?0:this.maxScrollX),(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+l/3:e>0?0:this.maxScrollY),this.directionX=a>0?-1:0>a?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(i,e),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){var i,e,n,r,o,a,l,c,p,u;return this.enabled&&h.eventType[t.type]===this.initiated&&(this.options.preventDefault&&!h.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t,n=h.getTime()-this.startTime,r=s.round(this.x),o=s.round(this.y),a=s.abs(r-this.startX),l=s.abs(o-this.startY),c=0,p="",this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime))?(this.scrollTo(r,o),this.moved?this._events.flick&&200>n&&100>a&&100>l?void this._execEvent("flick"):(this.options.momentum&&300>n&&(i=this.hasHorizontalScroll?h.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},e=this.hasVerticalScroll?h.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},r=i.destination,o=e.destination,c=s.max(i.duration,e.duration),this.isInTransition=1),this.options.snap&&(u=this._nearestSnap(r,o),this.currentPage=u,c=this.options.snapSpeed||s.max(s.max(s.min(s.abs(r-u.x),1e3),s.min(s.abs(o-u.y),1e3)),300),r=u.x,o=u.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing),r!=this.x||o!=this.y?((r>0||r<this.maxScrollX||o>0||o<this.maxScrollY)&&(p=h.ease.quadratic),void this.scrollTo(r,o,c,p)):void this._execEvent("scrollEnd")):(this.options.tap&&h.tap(t,this.options.tap),this.options.click&&h.click(t),void this._execEvent("scrollCancel"))):void 0},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var i=this.x,e=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?e=0:this.y<this.maxScrollY&&(e=this.maxScrollY),i==this.x&&e==this.y?!1:(this.scrollTo(i,e,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight,this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},off:function(t,i){if(this._events[t]){var e=this._events[t].indexOf(i);e>-1&&this._events[t].splice(e,1)}},_execEvent:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;e>i;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,i,e,s){t=this.x+t,i=this.y+i,e=e||0,this.scrollTo(t,i,e,s)},scrollTo:function(t,i,e,s){s=s||h.ease.circular,this.isInTransition=this.options.useTransition&&e>0,!e||this.options.useTransition&&s.style?(this._transitionTimingFunction(s.style),this._transitionTime(e),this._translate(t,i)):this._animate(t,i,e,s.fn)},scrollToElement:function(t,i,e,n,r){if(t=t.nodeType?t:this.scroller.querySelector(t)){var o=h.offset(t);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,e===!0&&(e=s.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),n===!0&&(n=s.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=e||0,o.top-=n||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,i=void 0===i||null===i||"auto"===i?s.max(s.abs(this.x-o.left),s.abs(this.y-o.top)):i,this.scrollTo(o.left,o.top,i,r)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.scrollerStyle[h.style.transitionDuration]="0.001s"),this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[h.style.transitionTimingFunction]=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTimingFunction(t)},_translate:function(t,i){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+t+"px,"+i+"px)"+this.translateZ:(t=s.round(t),i=s.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.x=t,this.y=i,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].updatePosition()},_initEvents:function(i){var e=i?h.removeEvent:h.addEvent,s=this.options.bindToWrapper?this.wrapper:t;e(t,"orientationchange",this),e(t,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(s,"mousemove",this),e(s,"mousecancel",this),e(s,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,h.prefixPointerEvent("pointerdown"),this),e(s,h.prefixPointerEvent("pointermove"),this),e(s,h.prefixPointerEvent("pointercancel"),this),e(s,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(s,"touchmove",this),e(s,"touchcancel",this),e(s,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var i,e,s=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(s=s[h.style.transform].split(")")[0].split(", "),i=+(s[12]||s[4]),e=+(s[13]||s[5])):(i=+s.left.replace(/[^-\d.]/g,""),e=+s.top.replace(/[^-\d.]/g,"")),{x:i,y:e}},_initIndicators:function(){function t(t){for(var i=h.indicators.length;i--;)t.call(h.indicators[i])}var i,e,s=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,a=[],h=this;for(this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(i={el:r("v",s,this.options.scrollbars),interactive:s,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(i.el),a.push(i)),this.options.scrollX&&(i={el:r("h",s,this.options.scrollbars),interactive:s,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(i.el),a.push(i))),this.options.indicators&&(a=a.concat(this.options.indicators)),e=a.length;e--;)this.indicators.push(new o(this,a[e]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var i,e,n,r,o=this;if(void 0===this.wheelTimeout&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd"),o.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(i=-t.deltaX*this.options.mouseWheelSpeed,e=-t.deltaY*this.options.mouseWheelSpeed):(i=-t.deltaX,e=-t.deltaY);else if("wheelDeltaX"in t)i=t.wheelDeltaX/120*this.options.mouseWheelSpeed,e=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)i=e=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;i=e=-t.detail/3*this.options.mouseWheelSpeed}if(i*=this.options.invertWheelDirection,e*=this.options.invertWheelDirection,this.hasVerticalScroll||(i=e,e=0),this.options.snap)return n=this.currentPage.pageX,r=this.currentPage.pageY,i>0?n--:0>i&&n++,e>0?r--:0>e&&r++,void this.goToPage(n,r);n=this.x+s.round(this.hasHorizontalScroll?i:0),r=this.y+s.round(this.hasVerticalScroll?e:0),n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),r>0?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(n,r,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,i,e,n,r,o,a=0,h=0,l=0,c=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(e=s.round(c/2),n=s.round(p/2);l>-this.scrollerWidth;){for(this.pages[a]=[],t=0,r=0;r>-this.scrollerHeight;)this.pages[a][t]={x:s.max(l,this.maxScrollX),y:s.max(r,this.maxScrollY),width:c,height:p,cx:l-e,cy:r-n},r-=p,t++;l-=c,a++}else for(o=this.options.snap,t=o.length,i=-1;t>a;a++)(0===a||o[a].offsetLeft<=o[a-1].offsetLeft)&&(h=0,i++),this.pages[h]||(this.pages[h]=[]),l=s.max(-o[a].offsetLeft,this.maxScrollX),r=s.max(-o[a].offsetTop,this.maxScrollY),e=l-s.round(o[a].offsetWidth/2),n=r-s.round(o[a].offsetHeight/2),this.pages[h][i]={x:l,y:r,width:o[a].offsetWidth,height:o[a].offsetHeight,cx:e,cy:n},l>this.maxScrollX&&h++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),0===this.options.snapThreshold%1?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.x-this.startX),1e3),s.min(s.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,i){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var e=0,n=this.pages.length,r=0;if(s.abs(t-this.absStartX)<this.snapThresholdX&&s.abs(i-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY);n>e;e++)if(t>=this.pages[e][0].cx){t=this.pages[e][0].x;break}for(n=this.pages[e].length;n>r;r++)if(i>=this.pages[0][r].cy){i=this.pages[0][r].y;break}return e==this.currentPage.pageX&&(e+=this.directionX,0>e?e=0:e>=this.pages.length&&(e=this.pages.length-1),t=this.pages[e][0].x),r==this.currentPage.pageY&&(r+=this.directionY,0>r?r=0:r>=this.pages[0].length&&(r=this.pages[0].length-1),i=this.pages[0][r].y),{x:t,y:i,pageX:e,pageY:r}},goToPage:function(t,i,e,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),i>=this.pages[t].length?i=this.pages[t].length-1:0>i&&(i=0);var r=this.pages[t][i].x,o=this.pages[t][i].y;e=void 0===e?this.options.snapSpeed||s.max(s.max(s.min(s.abs(r-this.x),1e3),s.min(s.abs(o-this.y),1e3)),300):e,this.currentPage={x:r,y:o,pageX:t,pageY:i},this.scrollTo(r,o,e,n)},next:function(t,i){var e=this.currentPage.pageX,s=this.currentPage.pageY;e++,e>=this.pages.length&&this.hasVerticalScroll&&(e=0,s++),this.goToPage(e,s,t,i)},prev:function(t,i){var e=this.currentPage.pageX,s=this.currentPage.pageY;e--,0>e&&this.hasVerticalScroll&&(e=0,s--),this.goToPage(e,s,t,i)},_initKeys:function(){var i,e={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in e)this.options.keyBindings[i]=this.options.keyBindings[i]||e[i];h.addEvent(t,"keydown",this),this.on("destroy",function(){h.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var i,e=this.options.snap,n=e?this.currentPage.pageX:this.x,r=e?this.currentPage.pageY:this.y,o=h.getTime(),a=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(i=this.getComputedPosition(),this._translate(s.round(i.x),s.round(i.y)),this.isInTransition=!1),this.keyAcceleration=200>o-a?s.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=e?1:this.wrapperWidth:r+=e?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=e?1:this.wrapperWidth:r-=e?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=e?this.pages.length-1:this.maxScrollX,r=e?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0,r=0;break;case this.options.keyBindings.left:n+=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:r+=e?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:r-=e?1:5+this.keyAcceleration>>0;break;default:return}if(e)return void this.goToPage(n,r);n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollY&&(r=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,r,0),this.keyTime=o}},_animate:function(t,i,e,s){function n(){var u,d,f,m=h.getTime();return m>=p?(r.isAnimating=!1,r._translate(t,i),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(m=(m-c)/e,f=s(m),u=(t-o)*f+o,d=(i-l)*f+l,r._translate(u,d),void(r.isAnimating&&a(n)))}var r=this,o=this.x,l=this.y,c=h.getTime(),p=c+e;this.isAnimating=!0,n()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},o.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(t,"touchmove",this),h.removeEvent(t,h.prefixPointerEvent("pointermove"),this),h.removeEvent(t,"mousemove",this),h.removeEvent(t,"touchend",this),h.removeEvent(t,h.prefixPointerEvent("pointerup"),this),h.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(i){var e=i.touches?i.touches[0]:i;i.preventDefault(),i.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(t,"touchmove",this),this.options.disablePointer||h.addEvent(t,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var i,e,s,n,r=t.touches?t.touches[0]:t;h.getTime(),this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,i=r.pageX-this.lastPointX,this.lastPointX=r.pageX,e=r.pageY-this.lastPointY,this.lastPointY=r.pageY,s=this.x+i,n=this.y+e,this._pos(s,n),t.preventDefault(),t.stopPropagation()},_end:function(i){var e,n;this.initiated&&(this.initiated=!1,i.preventDefault(),i.stopPropagation(),h.removeEvent(t,"touchmove",this),h.removeEvent(t,h.prefixPointerEvent("pointermove"),this),h.removeEvent(t,"mousemove",this),this.scroller.options.snap&&(e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),n=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.scroller.x-e.x),1e3),s.min(s.abs(this.scroller.y-e.y),1e3)),300),(this.scroller.x!=e.x||this.scroller.y!=e.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,n,this.scroller.options.bounceEasing))),this.moved&&this.scroller._execEvent("scrollEnd"))},transitionTime:function(t){t=t||0,this.indicatorStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.indicatorStyle[h.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[h.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),this.wrapper.offsetHeight,this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=s.max(s.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=s.max(s.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&s.round(this.sizeRatioX*this.scroller.x)||0,i=this.options.listenY&&s.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=s.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=s.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),i<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=s.max(this.indicatorHeight+3*i,8),this.indicatorStyle.height=this.height+"px"),i=this.minBoundaryY):i>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=s.max(this.indicatorHeight-3*(i-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",i=this.maxPosY+this.indicatorHeight-this.height):i=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=i,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+t+"px,"+i+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=i+"px")},_pos:function(t,i){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>i?i=0:i>this.maxPosY&&(i=this.maxPosY),t=this.options.listenX?s.round(t/this.sizeRatioX):this.scroller.x,i=this.options.listenY?s.round(i/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,i)},fade:function(t,i){if(!i||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var e=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[h.style.transitionDuration]=e+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},n.utils=h,"undefined"!=typeof e&&e.exports?e.exports=n:t.IScroll=n}(window,document,Math)}.call(i,e,i,t),!(void 0!==s&&(t.exports=s))}]);